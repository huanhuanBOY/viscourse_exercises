!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var o={userID:"",userList:{"000TT":1,"011TT":1,"022TT":1,1:1,"000ha":1,"011me":1,"020yo":1,"030xi":1,"041le":1,"051zh":1,"061to":1,"071ki":1,"082mi":1,"092yu":1,"101re":1,"112jo":1,"120mu":1,"132qi":1,"142do":1,"152ze":1,"160ta":1,"171li":1,"181wu":1,"192ja":1,"202zh":1,"211fu":1,"222ke":1,"232yi":1,"241st":1,"252we":1,"260zr":1,"270xi":1,"280yi":1,"290re":1},init(){let e=o.checkLogin();e.length>=3?(o.userID=e,document.getElementById("sid_container").style.display="none",document.getElementById("id_exercise").style.display="block"):o.goLogin()},checkLogin(){let e=decodeURIComponent(document.cookie).split(";");for(let t=0;t<e.length;t++){let n=e[t].trim();for(;" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf("userid="))return n.substring("userid=".length,n.length)}return""},goLogin(){document.getElementById("sid_login").addEventListener("click",function(){let e=document.getElementById("sid_value").value;if(o.userID=userid,e in o.userList){if(userid="ipt_"+e,document.getElementById("sid_container").style.display="none",document.getElementById("id_exercise").style.display="block",1==e[2])document.getElementsByClassName("hints").style.display="block";else if(2==e[2]){document.getElementById("hints_2").style.display="block";for(var t=document.getElementsByClassName("hints"),n=0;n<t.length;n++)t[n].style.display="none"}else for(t=document.getElementsByClassName("hints"),n=0;n<t.length;n++)t[n].style.display="none";document.cookie="userid="+userid,o.init()}else alert("User ID is not correct!!")})}};o.init(),Parse.initialize("vis_exercise_app","vis_exercise_app"),Parse.serverURL="http://visexercise.hkustvis.org/parse";var i={pool:[],poolsize:199,static:{},init:function(){i.getTouchable(),i.getBrowser(),i.getOS()},accumulation(e){let t=i.defAttributes(e);for(let n in e)"object"!=typeof e[n]&&(t[n]=e[n]);i.pool.push(new Parse.Object("mousetrack",t)),i.pool.length>=i.poolsize&&(i.submitData(),i.pool=[])},submitData(){Parse.Object.saveAll(i.pool).then(function(){console.log("Success")}).catch(function(e){alert("Error saving test object!"+e.message)})},defAttributes(e){let t={};return t.d_path=i.getElementPathByEvent(e),t.d_userid=o.userID||"unknown",t.d_osVersion=i.static.OS,t.d_browser=i.static.Browser||"unknown",t.d_hastouch=i.static.hasTouch||"unknown",t.d_timestamp=(new Date).getTime(),t.d_clientWidth=e.srcElement.clientWidth,t.d_clientHeight=e.srcElement.clientHeight,t},getElementPathByEvent:function(e){let t=e.target;if(!t||null==t.classList)return"";let n=","+(t.tagName||"")+"#"+(t.id||"")+"."+t.classList.value.replace(/ /g,".");for(;null!=t.parentElement;)n=","+(t=t.parentElement).tagName+"#"+t.id+"."+t.classList.value.replace(/ /g,".")+n;return n.slice(1)},getTouchable:function(){i.static.hasTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0},getOS:function(){i.static.OS=navigator.appVersion.match(/\(.+?\)/)[0].replace(/[\(\)]/g,"")},getBrowser:function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""):"Chrome"===n[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),void(i.static.Browser=n.join(" ")))}};i.init(),n.d(t,"mousetrack",function(){return s});var s={config:{ele:null,mouseEvents:["mousemove","mousedown","mouseleave","mouseenter","mouseup","mouseover","mouseout","mousewheel","select","wheel","contextmenu"],windowEvent:["blur","focus"],documentEvent:["keypress","paste","copy","cut"]},init(){s.config.ele=document.getElementsByTagName("html")[0],s.setWindowEvent(),s.setDocumentEvent(),s.setMouseEvent()},throttle(e,t){var n=!1;return function(){n||(e.call(),n=!0,setTimeout(function(){n=!1},t))}},setWindowEvent(){s.config.windowEvent.forEach(e=>{window.addEventListener(e,function(e){i.accumulation(e)})}),window.onbeforeunload=function(e){i.accumulation(e),i.submitData()}},setDocumentEvent(){s.config.documentEvent.forEach(e=>{document.addEventListener(e,function(e){i.accumulation(e)})})},setMouseEvent(e){e||(e=window),s.config.mouseEvents.forEach(t=>{"string"==typeof t?e.addEventListener(t,function(e){i.accumulation(e)}):e.addEventListener(t,s.throttle(function(e){i.accumulation(e)},t[1]))})}};s.init()}]);